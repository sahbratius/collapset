<template>
  <UPageHero headline="II –≤–∞–π–ø" title="Collapset ‚Äî —Å–µ—Ä–≤–µ—Ä, —â–æ –ø–æ—á–∏–Ω–∞—î —Å–≤—ñ–π —à–ª—è—Ö üåç"
    description="–¶–µ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π, –ø–æ–ª—ñ—Ç–∏—á–Ω–∏–π Minecraft —Å–µ—Ä–≤–µ—Ä. –°—Ç–≤–æ—Ä–µ–Ω–∏–π –ú–∞–∫—Å–∏–º–æ–º (Robnays), —Ç–∞ —ñ–Ω—à–∏–º–∏ –ª—é–¥—å–º–∏ —è–∫—ñ –º–µ–Ω—ñ –¥–æ–ø–æ–º–æ–≥–∞–ª–∏. –ó—ñ –º–Ω–æ—é –º–æ–∂–Ω–∞ –∑–≤'—è–∑–∞—Ç–∏—Å—è —á–µ—Ä–µ–∑ Discord –∞–±–æ Telegram (—Ç–∞–º –æ–¥–Ω–∞–∫–æ–≤—ñ –Ω—ñ–∫–Ω–µ–π–º–∏). –î—è–∫—É—é –≤—Å—ñ–º —Ö—Ç–æ –≤—ñ–¥–≤—ñ–¥–∞–≤ —Ü–µ–π —Å–∞–π—Ç üòÅ"
    orientation="horizontal">
    <img src="~/assets/images/promo.svg" alt="–ü–∞–º'—è—Ç–Ω–∏–∫ –≤ –∞–ª—å—Ç–∞–¥–æ—Ä—ñ, —â–æ –∑ –ø–µ—Ä—à–æ–≥–æ –≤–∞–π–ø—É" class="h-full mx-auto my-0" />
    <template #links>
      <UModal title="–Ø–∫ –≥—Ä–∞—Ç–∏ –Ω–∞ –Ω–∞—à–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ?">
        <UButton icon="i-lucide-arrow-right" size="xl" color="primary" label="–ù—É–º–æ –≥—Ä–∞—Ç–∏!" variant="outline"
          class="cursor-pointer" @click="openModal" />
        <template #body>
          <div class="select-none">
            <ProseOl>
              <ProseLi>
                –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ <ULink to="/rules" target="_blank">–ø—Ä–∞–≤–∏–ª–∞</ULink> —ñ –¥–æ—Ç—Ä–∏–º—É–π—Ç–µ—Å—è —ó—Ö!
              </ProseLi>
              <ProseLi>
                –ü—Ä–∏—î–¥–Ω–∞–π—Ç–µ—Å—è, –±—É–¥—å –ª–∞—Å–∫–∞ –¥–æ –Ω–∞—à–æ–≥–æ Discord —Å–µ—Ä–≤–µ—Ä—É. –í–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–∏—î–¥–Ω–∞—Ç–∏—Å—è, –Ω–∞—Ç–∏—Å–Ω—É–≤—à–∏ –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø
                –¥—ñ—Å–∫–æ—Ä–¥–∞ –∞–±–æ
                <ULink to="https://discord.gg/FPD7xvBkcd" target="_blank">–Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å —Ç—É—Ç</ULink>
              </ProseLi>
              <ProseLi>
                –î—ñ–∑–Ω–∞–π—Ç–µ—Å—è —è–∫—ñ –º–µ—Ö–∞–Ω—ñ–∫–∏ –º–∞—î –Ω–∞—à —Å–µ—Ä–≤–µ—Ä –Ω–∞ —Ü—å–æ–º—É —Å–∞–π—Ç—ñ
              </ProseLi>
              <ProseLi>
                –ó–∞–ø—É—Å—Ç—ñ—Ç—å <ProseStrong>Minecraft Java Edition</ProseStrong> –≤–µ—Ä—Å—ñ—ó <ProseCode>1.20.2</ProseCode> –∞–±–æ
                –≤–∏—â–µ
                —Ç–∞
                –ø—Ä–∏—î–¥–Ω–∞–π—Ç–µ—Å—è —á–µ—Ä–µ–∑ —Ü–µ IP:
                <UInput v-model="serverIp" readonly class="w-full font-mono"
                  :ui="{ icon: { trailing: { pointer: '' } } }">
                  <template #trailing>
                    <UButton :icon="copyIcon" :variant="isCopied ? 'soft' : 'ghost'"
                      :color="isCopied ? 'green' : 'gray'" :padded="false" @click="copyIp"
                      :aria-label="isCopied ? '–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ' : '–ö–æ–ø—ñ—é–≤–∞—Ç–∏ IP'"
                      :title="isCopied ? '–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!' : '–ö–æ–ø—ñ—é–≤–∞—Ç–∏ IP'" />
                  </template>
                </UInput>
              </ProseLi>
            </ProseOl>
          </div>
        </template>
      </UModal>
    </template>
  </UPageHero>
</template>
<script setup>
const isModalOpen = ref(false)
const openModal = () => isModalOpen.value = true

const toast = useToast();
const serverIp = ref('collapset.minecraftjoin.xyz');
const isCopied = ref(false);
const copyIcon = computed(() =>
  isCopied.value ? 'i-heroicons-check' : 'i-heroicons-clipboard-document'
);

const copyIp = async () => {
  if (!navigator.clipboard) {
    toast.add({
      title: '–ü–æ–º–∏–ª–∫–∞',
      description: 'API –±—É—Ñ–µ—Ä–∞ –æ–±–º—ñ–Ω—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π.',
      icon: 'i-heroicons-exclamation-triangle',
      color: 'red'
    });
    return;
  }

  try {
    await navigator.clipboard.writeText(serverIp.value);

    isCopied.value = true;

    setTimeout(() => {
      isCopied.value = false;
    }, 2000);

    toast.add({
      title: '–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ IP!',
      icon: 'i-heroicons-clipboard-document-check',
      timeout: 2000
    });

  } catch (err) {
    console.error('–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç:', err);
    toast.add({
      title: '–ü–æ–º–∏–ª–∫–∞ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è',
      description: '–ù–µ –≤–¥–∞–ª–æ—Å—è —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ IP-–∞–¥—Ä–µ—Å—É.',
      icon: 'i-heroicons-exclamation-triangle',
      color: 'red'
    });
  }
};
</script>
